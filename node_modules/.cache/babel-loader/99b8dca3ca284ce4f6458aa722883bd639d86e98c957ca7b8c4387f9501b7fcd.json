{"ast":null,"code":"const Minipass = require('minipass');\nconst _flush = Symbol('_flush');\nconst _flushed = Symbol('_flushed');\nconst _flushing = Symbol('_flushing');\nclass Flush extends Minipass {\n  constructor() {\n    let opt = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (typeof opt === 'function') opt = {\n      flush: opt\n    };\n    super(opt);\n\n    // or extend this class and provide a 'flush' method in your subclass\n    if (typeof opt.flush !== 'function' && typeof this.flush !== 'function') throw new TypeError('must provide flush function in options');\n    this[_flush] = opt.flush || this.flush;\n  }\n  emit(ev) {\n    for (var _len = arguments.length, data = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      data[_key - 1] = arguments[_key];\n    }\n    if (ev !== 'end' && ev !== 'finish' || this[_flushed]) return super.emit(ev, ...data);\n    if (this[_flushing]) return;\n    this[_flushing] = true;\n    const afterFlush = er => {\n      this[_flushed] = true;\n      er ? super.emit('error', er) : super.emit('end');\n    };\n    const ret = this[_flush](afterFlush);\n    if (ret && ret.then) ret.then(() => afterFlush(), er => afterFlush(er));\n  }\n}\nmodule.exports = Flush;","map":{"version":3,"names":["Minipass","require","_flush","Symbol","_flushed","_flushing","Flush","constructor","opt","arguments","length","undefined","flush","TypeError","emit","ev","_len","data","Array","_key","afterFlush","er","ret","then","module","exports"],"sources":["/Users/user/node_modules/minipass-flush/index.js"],"sourcesContent":["const Minipass = require('minipass')\nconst _flush = Symbol('_flush')\nconst _flushed = Symbol('_flushed')\nconst _flushing = Symbol('_flushing')\nclass Flush extends Minipass {\n  constructor (opt = {}) {\n    if (typeof opt === 'function')\n      opt = { flush: opt }\n\n    super(opt)\n\n    // or extend this class and provide a 'flush' method in your subclass\n    if (typeof opt.flush !== 'function' && typeof this.flush !== 'function')\n      throw new TypeError('must provide flush function in options')\n\n    this[_flush] = opt.flush || this.flush\n  }\n\n  emit (ev, ...data) {\n    if ((ev !== 'end' && ev !== 'finish') || this[_flushed])\n      return super.emit(ev, ...data)\n\n    if (this[_flushing])\n      return\n\n    this[_flushing] = true\n\n    const afterFlush = er => {\n      this[_flushed] = true\n      er ? super.emit('error', er) : super.emit('end')\n    }\n\n    const ret = this[_flush](afterFlush)\n    if (ret && ret.then)\n      ret.then(() => afterFlush(), er => afterFlush(er))\n  }\n}\n\nmodule.exports = Flush\n"],"mappings":"AAAA,MAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAU,CAAC;AACpC,MAAMC,MAAM,GAAGC,MAAM,CAAC,QAAQ,CAAC;AAC/B,MAAMC,QAAQ,GAAGD,MAAM,CAAC,UAAU,CAAC;AACnC,MAAME,SAAS,GAAGF,MAAM,CAAC,WAAW,CAAC;AACrC,MAAMG,KAAK,SAASN,QAAQ,CAAC;EAC3BO,WAAWA,CAAA,EAAY;IAAA,IAAVC,GAAG,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IACnB,IAAI,OAAOD,GAAG,KAAK,UAAU,EAC3BA,GAAG,GAAG;MAAEI,KAAK,EAAEJ;IAAI,CAAC;IAEtB,KAAK,CAACA,GAAG,CAAC;;IAEV;IACA,IAAI,OAAOA,GAAG,CAACI,KAAK,KAAK,UAAU,IAAI,OAAO,IAAI,CAACA,KAAK,KAAK,UAAU,EACrE,MAAM,IAAIC,SAAS,CAAC,wCAAwC,CAAC;IAE/D,IAAI,CAACX,MAAM,CAAC,GAAGM,GAAG,CAACI,KAAK,IAAI,IAAI,CAACA,KAAK;EACxC;EAEAE,IAAIA,CAAEC,EAAE,EAAW;IAAA,SAAAC,IAAA,GAAAP,SAAA,CAAAC,MAAA,EAANO,IAAI,OAAAC,KAAA,CAAAF,IAAA,OAAAA,IAAA,WAAAG,IAAA,MAAAA,IAAA,GAAAH,IAAA,EAAAG,IAAA;MAAJF,IAAI,CAAAE,IAAA,QAAAV,SAAA,CAAAU,IAAA;IAAA;IACf,IAAKJ,EAAE,KAAK,KAAK,IAAIA,EAAE,KAAK,QAAQ,IAAK,IAAI,CAACX,QAAQ,CAAC,EACrD,OAAO,KAAK,CAACU,IAAI,CAACC,EAAE,EAAE,GAAGE,IAAI,CAAC;IAEhC,IAAI,IAAI,CAACZ,SAAS,CAAC,EACjB;IAEF,IAAI,CAACA,SAAS,CAAC,GAAG,IAAI;IAEtB,MAAMe,UAAU,GAAGC,EAAE,IAAI;MACvB,IAAI,CAACjB,QAAQ,CAAC,GAAG,IAAI;MACrBiB,EAAE,GAAG,KAAK,CAACP,IAAI,CAAC,OAAO,EAAEO,EAAE,CAAC,GAAG,KAAK,CAACP,IAAI,CAAC,KAAK,CAAC;IAClD,CAAC;IAED,MAAMQ,GAAG,GAAG,IAAI,CAACpB,MAAM,CAAC,CAACkB,UAAU,CAAC;IACpC,IAAIE,GAAG,IAAIA,GAAG,CAACC,IAAI,EACjBD,GAAG,CAACC,IAAI,CAAC,MAAMH,UAAU,EAAE,EAAEC,EAAE,IAAID,UAAU,CAACC,EAAE,CAAC,CAAC;EACtD;AACF;AAEAG,MAAM,CAACC,OAAO,GAAGnB,KAAK"},"metadata":{},"sourceType":"script","externalDependencies":[]}