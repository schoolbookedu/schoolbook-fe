{"ast":null,"code":"var _jsxFileName = \"/Users/user/schoolbook-fe/src/component/Instructor/Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef, useContext } from \"react\";\nimport AuthContext from \"../../context/AuthProvider\";\nimport axios from \"../../api/axios\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"./RegisterTab.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst LOGIN_URL = \"api/v1/users/login\";\nconst Login = () => {\n  _s();\n  const emailRef = useRef();\n  const errRef = useRef();\n  const Navigate = useNavigate();\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\");\n\n  //Login\n  useEffect(() => {\n    var _emailRef$current;\n    (_emailRef$current = emailRef.current) === null || _emailRef$current === void 0 ? void 0 : _emailRef$current.focus();\n  }, []);\n  useEffect(() => {\n    setErrMsg(\"\");\n  }, [email, password]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      var _response$data;\n      const response = await axios.post(LOGIN_URL, JSON.stringify({\n        email,\n        password\n      }), {\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        withCredentials: false\n      });\n      // Display accesstoken in the console\n      // console.log(JSON.stringify(response?.data));\n      // console.log(JSON.stringify(response));\n      const accessToken = response === null || response === void 0 ? void 0 : response.data.accessToken;\n      const userType = response === null || response === void 0 ? void 0 : (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.userType;\n      setAuth({\n        email,\n        password,\n        userType,\n        accessToken\n      });\n      setEmail(\"\");\n      setPassword(\"\");\n      setSuccess(true);\n      Navigate(\"/InstructorDashboard\");\n    } catch (err) {\n      var _err$response, _err$response2;\n      if (!(err !== null && err !== void 0 && err.response)) {\n        setErrMsg(\"No server response\");\n      } else if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 400) {\n        setErrMsg(\"Invalid Username or Password\");\n      } else if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) === 401) {\n        setErrMsg(\"Unauthorized\");\n      } else {\n        setErrMsg(\"Login Failed\");\n      }\n      errRef.current.focus();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        id: \"email\",\n        ref: emailRef,\n        onChange: e => setEmail(e.target.value),\n        value: email,\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        id: \"password\",\n        onChange: e => setPassword(e.target.value),\n        value: password,\n        required: true,\n        autoComplete: \"current-password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loginButton\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/PassRecover\",\n          children: \"Forgot\\xA0password?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(Login, \"03W0F8KI3/8s4bciEA2WL3P8wU8=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useContext","AuthContext","axios","Link","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","LOGIN_URL","Login","_s","emailRef","errRef","Navigate","setAuth","email","setEmail","password","setPassword","errMsg","setErrMsg","_emailRef$current","current","focus","handleSubmit","e","preventDefault","_response$data","response","post","JSON","stringify","headers","withCredentials","accessToken","data","userType","setSuccess","err","_err$response","_err$response2","status","children","onSubmit","type","placeholder","id","ref","onChange","target","value","required","fileName","_jsxFileName","lineNumber","columnNumber","autoComplete","className","to","_c","$RefreshReg$"],"sources":["/Users/user/schoolbook-fe/src/component/Instructor/Login.jsx"],"sourcesContent":["import React, { useState, useEffect, useRef, useContext } from \"react\";\nimport AuthContext from \"../../context/AuthProvider\";\nimport axios from \"../../api/axios\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport \"./RegisterTab.css\";\n\nconst LOGIN_URL = \"api/v1/users/login\";\n\nconst Login = () => {\n  const emailRef = useRef();\n  const errRef = useRef();\n  const Navigate = useNavigate();\n  const { setAuth } = useContext(AuthContext);\n\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errMsg, setErrMsg] = useState(\"\")\n\n  //Login\n  useEffect(() => {\n    emailRef.current?.focus();\n  }, []);\n\n  useEffect(() => {\n    setErrMsg(\"\");\n  }, [email, password]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n\n    try {\n      const response = await axios.post(\n        LOGIN_URL,\n        JSON.stringify({ email, password }),\n        {\n          headers: { \"Content-Type\": \"application/json\" },\n          withCredentials: false,\n        }\n      );\n      // Display accesstoken in the console\n      // console.log(JSON.stringify(response?.data));\n      // console.log(JSON.stringify(response));\n      const accessToken = response?.data.accessToken;\n      const userType = response?.data?.userType;\n      setAuth({ email, password, userType, accessToken });\n      setEmail(\"\");\n      setPassword(\"\");\n      setSuccess(true);\n      Navigate(\"/InstructorDashboard\");\n    } catch (err) {\n      if (!err?.response) {\n        setErrMsg(\"No server response\");\n      } else if (err.response?.status === 400) {\n        setErrMsg(\"Invalid Username or Password\");\n      } else if (err.response?.status === 401) {\n        setErrMsg(\"Unauthorized\");\n      } else {\n        setErrMsg(\"Login Failed\");\n      }\n      errRef.current.focus();\n    }\n  };\n\n  return (\n    <>\n      <form onSubmit={handleSubmit}>\n        <input\n          type=\"email\"\n          placeholder=\"Email\"\n          id=\"email\"\n          ref={emailRef}\n          onChange={(e) => setEmail(e.target.value)}\n          value={email}\n          required\n        />\n        <input\n          type=\"password\"\n          placeholder=\"Password\"\n          id=\"password\"\n          onChange={(e) => setPassword(e.target.value)}\n          value={password}\n          required\n          autoComplete=\"current-password\"\n        />\n        <div className=\"loginButton\">\n          <input type=\"submit\" value=\"Login\" />\n          <Link to=\"/PassRecover\">Forgot&nbsp;password?</Link>\n        </div>\n      </form>\n    </>\n  );\n};\nexport default Login;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}