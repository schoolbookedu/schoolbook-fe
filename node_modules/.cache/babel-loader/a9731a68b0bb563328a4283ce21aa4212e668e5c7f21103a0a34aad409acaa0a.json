{"ast":null,"code":"const Minipass = require('minipass');\nconst EE = require('events');\nconst isStream = s => s && s instanceof EE && (typeof s.pipe === 'function' ||\n// readable\ntypeof s.write === 'function' && typeof s.end === 'function' // writable\n);\n\nconst _head = Symbol('_head');\nconst _tail = Symbol('_tail');\nconst _linkStreams = Symbol('_linkStreams');\nconst _setHead = Symbol('_setHead');\nconst _setTail = Symbol('_setTail');\nconst _onError = Symbol('_onError');\nconst _onData = Symbol('_onData');\nconst _onEnd = Symbol('_onEnd');\nconst _onDrain = Symbol('_onDrain');\nconst _streams = Symbol('_streams');\nclass Pipeline extends Minipass {\n  constructor(opts) {\n    for (var _len = arguments.length, streams = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      streams[_key - 1] = arguments[_key];\n    }\n    if (isStream(opts)) {\n      streams.unshift(opts);\n      opts = {};\n    }\n    super(opts);\n    this[_streams] = [];\n    if (streams.length) this.push(...streams);\n  }\n  [_linkStreams](streams) {\n    // reduce takes (left,right), and we return right to make it the\n    // new left value.\n    return streams.reduce((src, dest) => {\n      src.on('error', er => dest.emit('error', er));\n      src.pipe(dest);\n      return dest;\n    });\n  }\n  push() {\n    for (var _len2 = arguments.length, streams = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      streams[_key2] = arguments[_key2];\n    }\n    this[_streams].push(...streams);\n    if (this[_tail]) streams.unshift(this[_tail]);\n    const linkRet = this[_linkStreams](streams);\n    this[_setTail](linkRet);\n    if (!this[_head]) this[_setHead](streams[0]);\n  }\n  unshift() {\n    for (var _len3 = arguments.length, streams = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      streams[_key3] = arguments[_key3];\n    }\n    this[_streams].unshift(...streams);\n    if (this[_head]) streams.push(this[_head]);\n    const linkRet = this[_linkStreams](streams);\n    this[_setHead](streams[0]);\n    if (!this[_tail]) this[_setTail](linkRet);\n  }\n  destroy(er) {\n    // set fire to the whole thing.\n    this[_streams].forEach(s => typeof s.destroy === 'function' && s.destroy());\n    return super.destroy(er);\n  }\n\n  // readable interface -> tail\n  [_setTail](stream) {\n    this[_tail] = stream;\n    stream.on('error', er => this[_onError](stream, er));\n    stream.on('data', chunk => this[_onData](stream, chunk));\n    stream.on('end', () => this[_onEnd](stream));\n    stream.on('finish', () => this[_onEnd](stream));\n  }\n\n  // errors proxied down the pipeline\n  // they're considered part of the \"read\" interface\n  [_onError](stream, er) {\n    if (stream === this[_tail]) this.emit('error', er);\n  }\n  [_onData](stream, chunk) {\n    if (stream === this[_tail]) super.write(chunk);\n  }\n  [_onEnd](stream) {\n    if (stream === this[_tail]) super.end();\n  }\n  pause() {\n    super.pause();\n    return this[_tail] && this[_tail].pause && this[_tail].pause();\n  }\n\n  // NB: Minipass calls its internal private [RESUME] method during\n  // pipe drains, to avoid hazards where stream.resume() is overridden.\n  // Thus, we need to listen to the resume *event*, not override the\n  // resume() method, and proxy *that* to the tail.\n  emit(ev) {\n    if (ev === 'resume' && this[_tail] && this[_tail].resume) this[_tail].resume();\n    for (var _len4 = arguments.length, args = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n      args[_key4 - 1] = arguments[_key4];\n    }\n    return super.emit(ev, ...args);\n  }\n\n  // writable interface -> head\n  [_setHead](stream) {\n    this[_head] = stream;\n    stream.on('drain', () => this[_onDrain](stream));\n  }\n  [_onDrain](stream) {\n    if (stream === this[_head]) this.emit('drain');\n  }\n  write(chunk, enc, cb) {\n    return this[_head].write(chunk, enc, cb) && (this.flowing || this.buffer.length === 0);\n  }\n  end(chunk, enc, cb) {\n    this[_head].end(chunk, enc, cb);\n    return this;\n  }\n}\nmodule.exports = Pipeline;","map":{"version":3,"names":["Minipass","require","EE","isStream","s","pipe","write","end","_head","Symbol","_tail","_linkStreams","_setHead","_setTail","_onError","_onData","_onEnd","_onDrain","_streams","Pipeline","constructor","opts","_len","arguments","length","streams","Array","_key","unshift","push","reduce","src","dest","on","er","emit","_len2","_key2","linkRet","_len3","_key3","destroy","forEach","stream","chunk","pause","ev","resume","_len4","args","_key4","enc","cb","flowing","buffer","module","exports"],"sources":["/Users/user/node_modules/minipass-pipeline/index.js"],"sourcesContent":["const Minipass = require('minipass')\nconst EE = require('events')\nconst isStream = s => s && s instanceof EE && (\n  typeof s.pipe === 'function' || // readable\n  (typeof s.write === 'function' && typeof s.end === 'function') // writable\n)\n\nconst _head = Symbol('_head')\nconst _tail = Symbol('_tail')\nconst _linkStreams = Symbol('_linkStreams')\nconst _setHead = Symbol('_setHead')\nconst _setTail = Symbol('_setTail')\nconst _onError = Symbol('_onError')\nconst _onData = Symbol('_onData')\nconst _onEnd = Symbol('_onEnd')\nconst _onDrain = Symbol('_onDrain')\nconst _streams = Symbol('_streams')\nclass Pipeline extends Minipass {\n  constructor (opts, ...streams) {\n    if (isStream(opts)) {\n      streams.unshift(opts)\n      opts = {}\n    }\n\n    super(opts)\n    this[_streams] = []\n    if (streams.length)\n      this.push(...streams)\n  }\n\n  [_linkStreams] (streams) {\n    // reduce takes (left,right), and we return right to make it the\n    // new left value.\n    return streams.reduce((src, dest) => {\n      src.on('error', er => dest.emit('error', er))\n      src.pipe(dest)\n      return dest\n    })\n  }\n\n  push (...streams) {\n    this[_streams].push(...streams)\n    if (this[_tail])\n      streams.unshift(this[_tail])\n\n    const linkRet = this[_linkStreams](streams)\n\n    this[_setTail](linkRet)\n    if (!this[_head])\n      this[_setHead](streams[0])\n  }\n\n  unshift (...streams) {\n    this[_streams].unshift(...streams)\n    if (this[_head])\n      streams.push(this[_head])\n\n    const linkRet = this[_linkStreams](streams)\n    this[_setHead](streams[0])\n    if (!this[_tail])\n      this[_setTail](linkRet)\n  }\n\n  destroy (er) {\n    // set fire to the whole thing.\n    this[_streams].forEach(s =>\n      typeof s.destroy === 'function' && s.destroy())\n    return super.destroy(er)\n  }\n\n  // readable interface -> tail\n  [_setTail] (stream) {\n    this[_tail] = stream\n    stream.on('error', er => this[_onError](stream, er))\n    stream.on('data', chunk => this[_onData](stream, chunk))\n    stream.on('end', () => this[_onEnd](stream))\n    stream.on('finish', () => this[_onEnd](stream))\n  }\n\n  // errors proxied down the pipeline\n  // they're considered part of the \"read\" interface\n  [_onError] (stream, er) {\n    if (stream === this[_tail])\n      this.emit('error', er)\n  }\n  [_onData] (stream, chunk) {\n    if (stream === this[_tail])\n      super.write(chunk)\n  }\n  [_onEnd] (stream) {\n    if (stream === this[_tail])\n      super.end()\n  }\n  pause () {\n    super.pause()\n    return this[_tail] && this[_tail].pause && this[_tail].pause()\n  }\n\n  // NB: Minipass calls its internal private [RESUME] method during\n  // pipe drains, to avoid hazards where stream.resume() is overridden.\n  // Thus, we need to listen to the resume *event*, not override the\n  // resume() method, and proxy *that* to the tail.\n  emit (ev, ...args) {\n    if (ev === 'resume' && this[_tail] && this[_tail].resume)\n      this[_tail].resume()\n    return super.emit(ev, ...args)\n  }\n\n  // writable interface -> head\n  [_setHead] (stream) {\n    this[_head] = stream\n    stream.on('drain', () => this[_onDrain](stream))\n  }\n  [_onDrain] (stream) {\n    if (stream === this[_head])\n      this.emit('drain')\n  }\n  write (chunk, enc, cb) {\n    return this[_head].write(chunk, enc, cb) &&\n      (this.flowing || this.buffer.length === 0)\n  }\n  end (chunk, enc, cb) {\n    this[_head].end(chunk, enc, cb)\n    return this\n  }\n}\n\nmodule.exports = Pipeline\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}